import{u as S,_ as z}from"./useCalcPercent.5d23ad59.js";import{_ as L}from"./GameCard.e1c3ab29.js";import{_ as C,s as q,o as s,c as u,a as b,z as g,t as d,B as p,x as v,p as N,f as A,D as B,E as I,r as F,h as R,q as T,G as y,F as k,y as U,b as V,K as D}from"./entry.cc0ad062.js";const E=""+globalThis.__publicAssetsURL("svg/arrow-left.svg"),G=""+globalThis.__publicAssetsURL("svg/arrow-right.svg");const h=r=>(N("data-v-033a5cd4"),r=r(),A(),r),j={class:"pagination"},K=["disabled"],M=h(()=>b("img",{src:E,height:"14",width:"14"},null,-1)),Q=[M],W={key:2,class:"gap-page"},H={key:7,class:"gap-page"},J=["disabled"],O=h(()=>b("img",{src:G,height:"14",width:"14"},null,-1)),X=[O],Y={__name:"Pagination",props:{list:{type:Array,default(){return[]}},currentPage:{type:Number,default:1},gameCount:{type:Number,default:1},pageSize:{type:Number,default:1},showList:{type:Array,default(){return[10,25,50,100,200]}}},emits:["visibleList","update:currentPage","setCurrentPage"],setup(r,{emit:_}){const n=r,t=q(()=>Math.ceil(n.gameCount/n.pageSize)||0),c=_,e=m=>{switch(m){case 1:return 1;case 2:return n.currentPage<=3&&t.value>=2||t.value<=7&&t.value>=2?2:n.currentPage<=1?n.currentPage:"...";case 3:return n.currentPage<=3&&t.value>=3||t.value<=7&&t.value>=3?3:t.value-4>=n.currentPage?n.currentPage:t.value-4;case 4:return n.currentPage<=3&&t.value>=4||t.value<=7&&t.value>=4?4:t.value-4>=n.currentPage?n.currentPage+1:t.value-3;case 5:return n.currentPage<=3&&t.value>=5||t.value<=7&&t.value>=5?5:t.value-4>=n.currentPage?n.currentPage+2:t.value-2;case 6:return t.value-4<=n.currentPage||t.value<=7?t.value-1:"...";case 7:return t.value;default:return 1}},o=m=>{c("update:currentPage",m)};return(m,a)=>(s(),u("div",j,[b("button",{class:"btn-page previous",disabled:r.currentPage<=1,onClick:a[0]||(a[0]=i=>o(r.currentPage-1))},Q,8,K),e(1)>=1?(s(),u("button",{key:0,class:g(["btn-page",{active:r.currentPage===e(1)}]),onClick:a[1]||(a[1]=i=>o(e(1)))},d(e(1)),3)):p("",!0),e(2)>=2?(s(),u("button",{key:1,class:g(["btn-page",{active:r.currentPage===e(2)}]),onClick:a[2]||(a[2]=i=>o(e(2)))},d(e(2)),3)):e(2)==="..."?(s(),u("span",W,"...")):p("",!0),e(3)>=3?(s(),u("button",{key:3,class:g(["btn-page",{active:r.currentPage===e(3)}]),onClick:a[3]||(a[3]=i=>o(e(3)))},d(e(3)),3)):p("",!0),e(4)>=4?(s(),u("button",{key:4,class:g(["btn-page",{active:r.currentPage===e(4)}]),onClick:a[4]||(a[4]=i=>o(e(4)))},d(e(4)),3)):p("",!0),e(5)>=5?(s(),u("button",{key:5,class:g(["btn-page",{active:r.currentPage===e(5)}]),onClick:a[5]||(a[5]=i=>o(e(5)))},d(e(5)),3)):p("",!0),e(6)>=6?(s(),u("button",{key:6,class:g(["btn-page",{active:r.currentPage===e(6)}]),onClick:a[6]||(a[6]=i=>o(e(6)))},d(e(6)),3)):e(2)==="..."?(s(),u("span",H,"...")):p("",!0),e(7)>=7?(s(),u("button",{key:8,class:g(["btn-page",{active:r.currentPage===e(7)}]),onClick:a[7]||(a[7]=i=>o(e(7)))},d(e(7)),3)):p("",!0),b("button",{class:"btn-page next",disabled:v(t)<=r.currentPage,onClick:a[8]||(a[8]=i=>o(r.currentPage+1))},X,8,J)]))}},Z=C(Y,[["__scopeId","data-v-033a5cd4"]]),ee={class:"main"},te={class:"cards"},ae=B({__name:"index",async setup(r){var i,P;let _,n;const t=I(),c=F({page:1,pageSize:21});(i=t.query)!=null&&i.page&&(c.value.page=+((P=t.query)==null?void 0:P.page)),R(()=>c.value.page,()=>{D({query:{page:c.value.page}})});const{data:e,pending:o,error:m,refresh:a}=([_,n]=T(()=>S("/api/games",{query:c},"$pqtWcjQkdb")),_=await _,n(),_);return(ne,f)=>{const x=z,$=L,w=Z;return s(),u("main",ee,[v(o)?(s(),y(x,{key:0})):(s(),u(k,{key:1},[b("div",te,[(s(!0),u(k,null,U(v(e).list,l=>(s(),y($,{key:l.id,class:"card game-item",screenshots:l.short_screenshots,name:l.name,rating:l.rating,platforms:l.parent_platforms,to:`/${l.id}`},null,8,["screenshots","name","rating","platforms","to"]))),128))]),V(w,{class:"pagination",currentPage:v(c).page,"onUpdate:currentPage":f[0]||(f[0]=l=>v(c).page=l),gameCount:v(e).count,pageSize:v(c).pageSize},null,8,["currentPage","gameCount","pageSize"])],64))])}}});const oe=C(ae,[["__scopeId","data-v-b0db7ae1"]]);export{oe as default};
